@page "/home"
@rendermode InteractiveServer
@attribute [Authorize]

<PageTitle>Home</PageTitle>
<!--if there is no name present in DB, Partner will be displayed instead of the user's name-->
<h1 style="text-align: center; padding-bottom: 50px;">
    @if (string.IsNullOrWhiteSpace(userFirstName) && string.IsNullOrWhiteSpace(userLastName))
    {
        <text>Howdy Partner!</text>
    }
    else
    {
        <text>Howdy @userFirstName @userLastName!</text>
    }
</h1>

<div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; text-align: center;">

    <!-- Monthly Budget Total -->
    <Card Style="flex: 1 1 calc(100% - 20px); max-width: 300px; margin: 10px;">
        <CardBody Style="text-align: center;">

            <CardTitle>@monthlyBudgetTotal.ToString("C") / @monthlyIncome.ToString("C")</CardTitle>
            <CardSubTitle Class="mb-2 text-muted">Monthly Budget Total</CardSubTitle>
        </CardBody>
    </Card>

    <!-- Monthly Total Spent -->
    <Card Style="flex: 1 1 calc(100% - 20px); max-width: 300px; margin: 10px;">
        <CardBody Style="text-align: center;">

            <CardTitle>@monthlyTotalSpent.ToString("C")</CardTitle>
            <CardSubTitle Class="mb-2 text-muted">Monthly Total Spent</CardSubTitle>
        </CardBody>
    </Card>

    <!-- Over Monthly Budget -->
    <Card Style="flex: 1 1 calc(100% - 20px); max-width: 300px; margin: 10px;">
        <CardBody Style="text-align: center;">
            <CardTitle>@overMonthlyBudget.ToString("C")</CardTitle>
            <CardSubTitle Class="mb-2 text-muted">Over Monthly Budget</CardSubTitle>
        </CardBody>
    </Card>
</div>


<!--List of Recent Transactions (rendering issues)-->
<div style="padding-top: 50px;">
    <h3 style="padding: 20px">Recent Transactions</h3>
    <Grid TItem="UserTransaction"
          Class="table table-hover table-bordered table-striped"
          DataProvider="TransactionsDataProvider">
        <GridColumns>
            <GridColumn TItem="UserTransaction" HeaderText="Date" HeaderTextAlignment="Alignment.Center">
                <text style="color:blue">@context.TransactionDateTime.ToShortDateString()</text>
            </GridColumn>
            <GridColumn TItem="UserTransaction" HeaderText="Label">
                <text style="color:blue">@context.TransactionLabel</text>
            </GridColumn>
            <GridColumn TItem="UserTransaction" HeaderText="Amount" HeaderTextAlignment="Alignment.Center">
                <text style="color:blue">@context.TransactionAmt.ToString("C")</text>
            </GridColumn>
            <GridColumn TItem="UserTransaction" HeaderText="Category" HeaderTextAlignment="Alignment.Center">
                <text style="color:blue">@context.TransactionCategory</text>
            </GridColumn>
        </GridColumns>
    </Grid>
</div>


<!--Donut Chart-->
<div style="padding-top: 50px; padding-bottom: 50px;">
    <DoughnutChart @ref="doughnutChart" Width="500" />
</div>





